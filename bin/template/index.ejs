import Koa from 'koa'
<% if (middleWare.router) { %>
import koaRouter from 'koa-router'
<% } %>
<% if (middleWare.static) { %>
import koaStatic from 'koa-static'
<% } %>
const app = new Koa()
<% if (middleWare.router) { %>
    const router = new koaRouter()
<% } %>
<% if (middleWare.static) { %>  
    app.use(koaStatic(__dirname+"/static")) 
<% } %>
<% if (middleWare.router) { %>  
    router.get('/', async (ctx,next) => {
        ctx.body = "hello, world"
    })
    app.use(router.routes())
<% } %>

app.listen(<%= port %>,  () => {
    console.log("koa server is running at port <%= port %> ")
}) 